<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Recording Page</title>
<style>
    /* Add any necessary styles */
    body, html {
        height: 100%;
        margin: 0;
        overflow: hidden; /* Prevent scrolling */
    }
    .container {
        display: flex;
        flex-direction: column;
        height: 100%;
    }
    .video-container {
        position: relative;
        flex: 1;
    }
    .video-element {
        width: 100%;
        height: 100%;
    }
    .stop-button {
        position: absolute;
        bottom: 10px;
        left: 50%;
        transform: translateX(-50%);
        padding: 10px 20px;
        background-color: #f00; /* Adjust as needed */
        color: #fff; /* Adjust as needed */
        cursor: pointer;
        border: none;
        outline: none;
    }
</style>
</head>
<body>

<div class="container">
    <div class="video-container">
        <video id="video" class="video-element" playsinline></video>
    </div>
    <button id="stopButton" class="stop-button">Stop</button>
</div>

<script>
    const video = document.getElementById('video');
    const stopButton = document.getElementById('stopButton');

    // Get user media
    function startCamera() {
        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
            navigator.mediaDevices.getUserMedia({ video: true, audio: true })
                .then(function(stream) {
                    video.srcObject = stream;
                    video.play(); // Autoplay won't work on iOS without this
                })
                .catch(function(error) {
                    console.error('getUserMedia error:', error);
                });
        } else if (navigator.getUserMedia) { // handle older browsers that use getUserMedia
            navigator.getUserMedia({ video: true, audio: true }, function(stream) {
                video.srcObject = stream;
                video.play(); // Autoplay won't work on iOS without this
            }, function(error) {
                console.error('getUserMedia error:', error);
            });
        } else {
            console.error('getUserMedia is not supported in this browser.');
        }
    }

    // Add click event listener to stop button
    stopButton.addEventListener('click', function() {
    if (video.srcObject) {
        let tracks = video.srcObject.getTracks();
        tracks.forEach(function(track) {
            track.stop();
        });
        video.srcObject = null;
        
        // Navigate to the previous page
        window.history.back();
    }
});


    // Start camera when the page loads
    window.addEventListener('load', startCamera);
</script>

</body>
</html>
